<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Testo a spezzoni con srotolamento</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .spezzone {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: max-height 0.6s ease, opacity 0.6s ease;
    }
    .spezzone.mostrato {
      opacity: 1;
    }
  </style>
</head>
<body class="container py-4">

  <div id="spezzoni">
    <div class="spezzone mostrato" style="max-height: none;">
      <p>Questo è il primo pezzo di testo. Viene mostrato subito al caricamento.</p>
    </div>
    <div class="spezzone">
      <p>Questo è il secondo pezzo di testo. Compare con effetto srotolamento.</p>
    </div>
    <div class="spezzone">
      <p>Questo è il terzo e ultimo pezzo di testo. Dopo questo il pulsante sparisce.</p>
    </div>
  </div>

  <div class="text-center mt-4">
    <button id="continuaBtn" class="btn btn-success">Continua</button>
  </div>

  <script>
    const spezzoni = document.querySelectorAll('#spezzoni .spezzone');
    const btn = document.getElementById('continuaBtn');
    let indice = 0; // primo già visibile

    btn.addEventListener('click', () => {
      indice++;
      if (indice < spezzoni.length) {
        const el = spezzoni[indice];
        el.classList.add('mostrato');

        // calcola l'altezza naturale
        const fullHeight = el.scrollHeight + "px";
        el.style.maxHeight = fullHeight;

        // una volta finita la transizione, toglie il limite
        el.addEventListener('transitionend', () => {
          el.style.maxHeight = 'none';
        }, { once: true });

        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
      if (indice === spezzoni.length - 1) {
        btn.classList.add('d-none');
      }
    });
  </script>

</body>
</html>
